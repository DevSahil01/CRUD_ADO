@model StudentCreateViewModel

<div class="text-center">
    <h1 class="display-4">Add Student</h1>

</div>

<div class="container w-50 m-auto">
    <form asp-action="Create" asp-controller="Student" id="studentForm" method="post" enctype="multipart/form-data">
    @Html.AntiForgeryToken()
   

    <div class="form-group">
        <label for="name">Student Name:</label>
        <input type="text" class="form-control"  asp-for="student.Name" id="name">
    </div>
    <div class="form-group">
        <label for="email">Email address:</label>
        <input type="email" class="form-control"  asp-for="student.Email" id="email">
            <small class="text-danger" id="emailError"></small>
    </div>
    <div class="form-group">
        <label for="phone">Phone Number:</label>
        <input type="text" class="form-control" id="phone" asp-for="student.Phone">
            <small class="text-danger" id="phoneError"></small>
    </div>
    <div class="form-group">
        <label for="Age">Age:</label>
        <input type="number" class="form-control" id="Age" asp-for="student.Age">
    </div>

    @* 


      //GENDER SECTION 

    *@
        <div class="form-check">
            <input type="radio" class="form-check-input" id="radio1" value="Male" asp-for="student.Gender" checked >Male
            <label class="form-check-label" for="radio1"></label>
        </div>
        <div class="form-check">
            <input type="radio" class="form-check-input" id="radio2" asp-for="student.Gender" value="Female">Female
            <label class="form-check-label" for="radio2"></label>
        </div>
        <div class="form-check">
            <input type="radio" class="form-check-input" asp-for="student.Gender" value="Other" disabled>Other
            <label class="form-check-label"></label>
        </div>


        <div class="form-group my-4">
            <select id="DepartmentId" class="form-select" asp-for="student.DeptId">
            </select>
        </div>

        @*  /// CHECK BOX FOR DOCUMENTS    *@

        <div  id="DocumentCheckList">
           
        </div>





        <div class="d-flex align-items-center justify-content-center my-3 gap-2  ">
            <button type="submit" class="btn btn-primary" >Submit</button>

        <a asp-action="Index" class="btn btn-secondary">
            Cancel
        </a>
        </div>


</form>
</div>


@*
    AJAX  code to get all departments
*@
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script > 
   
$(document).ready(function (){

        $.ajax({
                 url:"/Student/getDepartments",
                 type:"GET",
                 success: function (data){
                      let ddl= $('#DepartmentId');
                      ddl.append('<option value="" > Select Department </option> ');



                      $.each(data, function(i,d){
                              ddl.append(`<option value="${d.deptId}"> ${d.deptName} </option > `)
                      });
                 }
                 
        });

        $.ajax({
                url: "/Student/getDocumentTypes",
                type:"GET",
                success: function (data){
                        let checkListEle=$('#DocumentCheckList');
                        $.each(data,function(i,d){
                                 
                                 checkListEle.append(` 
                                     <div class="form-check">
                                 <input class="form-check-input" type="checkbox" id=${d.docId} Name="SelectedDocuments"   value=${d.docId} >
                                    <label class="form-check-label">${d.docName}</label>
                                        </div> 
                                             <input type="file" name="DocumentFiles" class="form-control" />
                `)
                        })

                    console.log(data);
                }
        })

            $(document).on("change", ".form-check-input", function () {
        const fileInput = $(this).closest(".form-check").find("input[type='file']");
        fileInput.prop("disabled", !this.checked);
    });


});
</script>

