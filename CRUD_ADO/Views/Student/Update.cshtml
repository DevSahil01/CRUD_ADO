

@model StudentViewModel


<div class="text-center">
    <h1 class="display-4">Update Student</h1>

</div>

<div class="container w-50 m-auto">
<form asp-action="Update" asp-controller="Student" method="post">
    @Html.AntiForgeryToken()

        <input type="hidden" asp-for="Id" value="@Model.Id" />

    <div class="form-group">
        <label for="name">Student Name:</label>
            <input type="text" class="form-control" id="name"  asp-for="Name" value=@Model.Name>
    </div>
    <div class="form-group">
        <label for="email">Email address:</label>
            <input type="email" class="form-control" id="email" asp-for="Email" value=@Model.Email>
    </div>
    <div class="form-group">
        <label for="phone">Phone Number:</label>
            <input type="number" class="form-control" id="phone" asp-for="Phone" value=@Model.Phone >
    </div>
    <div class="form-group">
        <label for="Age">Age:</label>
            <input type="number" class="form-control" id="Age" asp-for="Age" value=@Model.Age >
    </div>

     <div class="form-check">
            <input type="radio" class="form-check-input" id="male_rd" value="Male" asp-for="Gender"   >Male
            <label class="form-check-label" for="radio1"></label>
        </div>
        <div class="form-check">
            <input type="radio" class="form-check-input" id="female_rd" asp-for="Gender" value="Female">Female
            <label class="form-check-label" for="radio2"></label>
        </div>
        <div class="form-check">
            <input type="radio" class="form-check-input" id="other_rd" asp-for="Gender" value="Other" >Other
            <label class="form-check-label"></label>
        </div>




        <div class="form-group my-4">
            <select id="DepartmentId" class="form-select" asp-for="DeptId">
            </select>
        </div>

        <div class="d-flex align-items-center justify-content-center my-3 gap-2  ">
            <button type="submit" class="btn btn-primary">Submit</button>

        <a asp-action="Index" class="btn btn-secondary">
            Cancel
        </a>
        </div>


</form>
</div>

@*
    AJAX  code to get all departments
*@
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
   
    const DeptName="@Model.DepartmentName";

    $(document).ready(function (){
          
            $.ajax({
                     url:"/Student/getDepartments",
                     type:"GET",
                     success: function (data){
                          let ddl= $('#DepartmentId');
                          ddl.append('<option value="" > Select Department </option> ');

                         

                          $.each(data, function(i,d){
                                  let selected=DeptName === d.deptName ? 'selected':"";
                                  ddl.append(`<option value="${d.deptId}"  ${selected} > ${d.deptName} </option > `)
                          });
                     }

            });


    });


    const Gender="@Model.Gender".trim();
    $(`.form-check-input[value="${Gender}"]`).prop("checked", true);
   
</script>